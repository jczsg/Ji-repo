# Git学习过程

1. **新建仓库**

   1. 使用命令创建仓库（两种）

      1. git int

         mkdir learn-git

         cd learn-git

         git init

      2. git clone

         git clone  仓库地址   

2. **工作区域和文件状态**

   1. 工作区，暂存区，本地仓库
   2. 未跟踪，未修改，已修改，已暂存

3. **添加和提交文件**

   1. 查看文件状态

      git status

   2. 添加到暂存区

      git add 文件名

      git add * 使用通配符添加多个文件

      git add . 还可添加文件夹

   3. 提交

      git commit 使用-m参数指定提交信息

      只提交已暂存的文件

      如果不输入-m参数，git自动进入交互式界面，默认使用vim来编辑提交信息：  

      i键可进入编辑模式，Esc 回到命令模式，输入：wq 保存退出即提交完成

      git log可以查看仓库提交历史记录并且了可以加入 -- online 参数查看简洁提交记录

4. **git reset 回退版本**

   1. |      参数       | 工作区 | 暂存区 |
      | :-------------: | :----: | :----: |
      |     --soft      |  保存  |  清空  |
      |     --hard      |  清空  |  清空  |
      | --mixed（默认） |  保存  |  清空  |

   2. 操作回溯

      git reflog 查看操作历史记录，找到版本号，使用git reset回退

5. **git diff 查看差异**

   1. 不加参数默认比较工作区和暂存区差异

      加 HEAD 比较工作区和仓库

      加 cached 比较暂存区和仓库

      加版本id比较版本差异内容

      加HEAD~ HEAD比较当前版本和上一个版本

      加HEAD~2 HEAD比较当前版本和上两个版本

      加分支名比较分支之间的差异

6. **git rm 删除文件**

   1. 同时删除工作区和暂存区的文件

      加 --cached<file>参数把文件从暂存区删除，但保留在当前工作区

      加 -r* 递归删除某个目录下的所有子目录和文件

      **删除后一定要提交**

7. **gitignore 忽略文件**

   1. 应该忽略的文件范围

      1. 系统或软件自动生成的文件
      2. 编译产生的中间文件和结果文件
      3. 运行时生成的日志文件、缓存文件、临时文件
      4. 带有敏感信息的配置文件

   2. 使用vi .gitignore修改

      不能忽略已经放到版本库中的文件，需要先删除，忽略后重新提交

   3. 匹配规则

      空行或以#开头的行会被忽略

      - *通配任意个字符
      - ？匹配单个字符
      - []匹配列表中的单个字符
      - **匹配任意的中间目录
      - !表示取反

8. **本地仓库和远程仓库**

   - git push 本地到远程

   - git pull 远程到本地

   - 还可使用git fetch获取远程仓库的修改，但并不自动合并到本地仓库中

9. **在VScode中使用Git**

   在仓库下直接输入code . 打开然后操作

 10. **分支**

   - 使用git branch 分支名创建

   - 使用git checkout 分支名切换

   - 因为git checkout还可切换文件，所以为防止歧义使用git switch切换分支

   - 使用git merge 分支名合并到main分支

   - 可以使用git log --graph --oneline --decorate --all查看分支图

   - 使用git branch -d删除分支（已经被合并的）-D强制删除

 11. **解决分支冲突**

     当两个分支同时修改了同一个文件的同一处位置就会产生冲突，

     解决方法：

     1. 手动修改冲突文件，合并冲突内容
     2. 添加暂存区
     3. 提交修改

     终止合并：在提交前输入

     ​                   git merge -- abort

 12. **回退和rebase**

     1. git rebase

        在任意分支执行

        机制：先找共同结点，并将当前分支移动到目标分支的最新提交后面

        与merge的优缺点比较：

        merge不会破坏原分支，方便回溯查看，但会产生额外的提交节点，分支图复杂

        rebase不新增额外提交记录，形成线性历史，直观干净，但改变当前分支branch out的节点，所以避免在共享分支使用

     